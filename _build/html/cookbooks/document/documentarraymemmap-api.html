<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="DocumentArrayMemmap API" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.jina.ai/cookbooks/document/documentarraymemmap-api.html" />
  <meta property="og:site_name" content="Jina Documentation" />
  <meta property="og:description" content="When your DocumentArray object contains a large number of Document, holding it in memory can be very demanding. You may want to use DocumentArrayMemmap to alleviate this issue. A DocumentArrayMemmap stores all Documents directly on the disk, while keeping a small lookup table in memory and a buff..." />
  <meta property="og:image" content="https://docs.jina.ai/_static/banner.png" />
  <meta property="og:image:alt" content="Jina Documentation" />
  <meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">
<meta property="og:description" content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
</script>
    <link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Executor" href="../executor/index.html" /><link rel="prev" title="DocumentArray API" href="documentarray-api.html" />

    <meta name="generator" content="sphinx-3.5.3, furo 2021.06.18.beta36"/>
        <title>DocumentArrayMemmap API - Welcome to Jina</title>
      <link rel="stylesheet" href="../../_static/styles/furo.css?digest=9b17055c4366e8b2949c66d6a9d8b0efe4dbaa60">
    <link rel="stylesheet" href="../../_static/pygments.css">
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.d53ab927f7bad3eaa42da95908504b10.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/main.css" />
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css">
    <link rel="stylesheet" href="../../_static/styles/furo-extensions.css?digest=ee12cdd73c4bbac24afec78d92c4afd7c2d8ea7f"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Welcome to Jina</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logo-new.gif" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/logo-new.gif" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Cookbooks</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Document/DocumentArray</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="document-api.html">Document API</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentarray-api.html">DocumentArray API</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">DocumentArrayMemmap API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../executor/index.html">Executor</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../executor/executor-api.html">Executor API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/executor-built-in-features.html">Executor Built-in Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/executors-in-action.html">Executors in Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/repository-structure.html">Structure of the Repository</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../flow/index.html">Flow</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../flow/flow-api.html">Flow API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/remarks.html">Remarks</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hub/index.html">JinaHub</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../hub/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub/create-hub-executor.html">1. Create Hub Executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub/push-executor.html">2. Push Executor to JinaHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub/update-executor.html">3. Update Executor in JinaHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub/pull-executor.html">4. Pull Executor from JinaHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub/use-hub-executor.html">5. Use in Jina Flow</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../daemon/index.html">JinaD</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../daemon/setup-jinad-server.html">Setup JinaD Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/start-jinad-client.html">Start JinaD Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/workspace.html">Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/create-remote-executors.html">Create Remote Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/create-remote-flows.html">Create Remote Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/stream-remote-logs.html">Streaming Remote Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daemon/development-using-jinad.html">Development using JinaD</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../math/index.html">Jina Math</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/distances.html">Distances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/dimension-reduction.html">Dimension Reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/other-helpers.html">Other helpers</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../serving/index.html">Serving Jina</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../serving/flow-as-a-service.html">Flow-as-a-service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../clean-code/index.html">Writing Clean &amp; Efficient Code with Jina</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Jina Command-Line Interface</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../proto/index.html">Jina Protobuf Specification</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jina#read-tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jina">GitHub repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://slack.jina.ai">Slack community</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <article role="main">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <div class="section" id="documentarraymemmap-api">
<h1>DocumentArrayMemmap API<a class="headerlink" href="#documentarraymemmap-api" title="Permalink to this headline">¶</a></h1>
<p>When your <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code> object contains a large number of <code class="docutils literal notranslate"><span class="pre">Document</span></code>, holding it in memory can be very demanding. You
may want to use <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> to alleviate this issue. A <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> stores all Documents directly on
the disk, while keeping a small lookup table in memory and a buffer pool of documents with a fixed size. The lookup
table contains the offset and length of each <code class="docutils literal notranslate"><span class="pre">Document</span></code>, hence it is much smaller than the full <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code>.
Elements are loaded on-demand to memory during the access. Memory-loaded documents are kept in the buffer pool to allow
modifying documents.</p>
<p>The next table show the speed and memory consumption when writing and reading 50,000 <code class="docutils literal notranslate"><span class="pre">Documents</span></code>.</p>
<div class="table-wrapper"><table border="1" class="docutils">
<thead>
<tr>
<th></th>
<th><code>DocumentArrayMemmap</code></th>
<th><code>DocumentArray</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Write to disk</td>
<td>0.62s</td>
<td>0.71s</td>
</tr>
<tr>
<td>Read from disk</td>
<td>0.11s</td>
<td>0.20s</td>
</tr>
<tr>
<td>Memory usage</td>
<td>20MB</td>
<td>342MB</td>
</tr>
<tr>
<td>Disk storage</td>
<td>14.3MB</td>
<td>12.6MB</td>
</tr>
</tbody>
</table></div>
<div class="section" id="create-documentarraymemmap">
<h2>Create <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code><a class="headerlink" href="#create-documentarraymemmap" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="add-documents-to-documentarraymemmap">
<h2>Add Documents to <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code><a class="headerlink" href="#add-documents-to-documentarraymemmap" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'world'</span><span class="p">)</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">dam</span></code> object stores all future Documents into <code class="docutils literal notranslate"><span class="pre">./my-memmap</span></code>, there is no need to manually call <code class="docutils literal notranslate"><span class="pre">save</span></code>/<code class="docutils literal notranslate"><span class="pre">reload</span></code>.
Recently added, modified or accessed documents are also kept in the memory buffer so all changes to documents are
applied first in the memory buffer and will be persisted to disk lazily (e.g when they quit the buffer pool or when
the <code class="docutils literal notranslate"><span class="pre">dam</span></code> object’s destructor is called). If you want to instantly persist the changed documents, you can call <code class="docutils literal notranslate"><span class="pre">save</span></code>.</p>
</div>
<div class="section" id="buffer-pool">
<h2>Buffer pool<a class="headerlink" href="#buffer-pool" title="Permalink to this headline">¶</a></h2>
<p>A fixed number of documents are kept in the memory buffer pool. The number can be configured with the constructor
parameter <code class="docutils literal notranslate"><span class="pre">buffer_pool_size</span></code> (1000 by default). Only the <code class="docutils literal notranslate"><span class="pre">buffer_pool_size</span></code> most recently accessed, modified or added
documents exist in the pool. Replacement of documents uses the LRU strategy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">Document</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
</pre></div>
</div>
<p>The buffer pool ensures that in-memory modified documents are persisted to disk. Therefore, you should not reference
documents manually and modify them if they might be outside of the buffer pool. The next section explains the best
practices when modifying documents.</p>
</div>
<div class="section" id="modifying-elements-of-documentarraymemmap">
<h2>Modifying elements of <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code><a class="headerlink" href="#modifying-elements-of-documentarraymemmap" title="Permalink to this headline">¶</a></h2>
<p>Modifying elements of a <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> is possible due to the fact that accessed and modified documents are kept
in the buffer pool:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'world'</span><span class="p">)</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">])</span>

<span class="n">dam</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dam</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>goodbye
</pre></div>
</div>
<p>However, there are practices to <strong>avoid</strong>. Mainly, you should not modify documents that you reference manually and that
might not be in the buffer pool. Here are some practices to avoid:</p>
<ol class="simple">
<li><p>Keep more  references than the buffer pool size and modify them:</p></li>
</ol>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--1">❌ Don’t</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">docs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>

<span class="n">dam</span><span class="p">[</span><span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hello
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--2">✅ Do</label><div class="tab-content docutils">
<p>Use the dam object to modify instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">docs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">dam</span><span class="p">:</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>

<span class="n">dam</span><span class="p">[</span><span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>goodbye
</pre></div>
</div>
<p>It’s also okay if you reference docs less than the buffer pool size:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">docs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>

<span class="n">dam</span><span class="p">[</span><span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>goodbye
</pre></div>
</div>
</div>
</div>
<ol class="simple">
<li><p>Modify a reference that might have left the buffer pool :</p></li>
</ol>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--1">❌ Don’t</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">my_doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_doc</span><span class="p">)</span>

<span class="c1"># my_doc leaves the buffer pool after extend</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">99</span><span class="p">)])</span>
<span class="n">my_doc</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>
<span class="n">dam</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hello
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--2">✅ Do</label><div class="tab-content docutils">
<p>Get the document from the dam object and then modify it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">,</span> <span class="n">buffer_pool_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">my_doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_doc</span><span class="p">)</span>

<span class="c1"># my_doc leaves the buffer pool after extend</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">99</span><span class="p">)])</span>
<span class="n">dam</span><span class="p">[</span><span class="n">my_doc</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span> <span class="c1"># or dam[0].text = 'goodbye'</span>
<span class="n">dam</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>goodbye
</pre></div>
</div>
</div>
</div>
<p>To summarize, it’s a best practice to <strong>rely on the <code class="docutils literal notranslate"><span class="pre">dam</span></code> object to reference the docs that you modify</strong>.</p>
</div>
<div class="section" id="clear-a-documentarraymemmap">
<h2>Clear a <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code><a class="headerlink" href="#clear-a-documentarraymemmap" title="Permalink to this headline">¶</a></h2>
<p>To clear all contents in a <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> object, simply call <code class="docutils literal notranslate"><span class="pre">.clear()</span></code>. It will clean all content on disk.</p>
<div class="section" id="pruning">
<h3>Pruning<a class="headerlink" href="#pruning" title="Permalink to this headline">¶</a></h3>
<p>One may notice another method <code class="docutils literal notranslate"><span class="pre">.prune()</span></code> that shares similar semantics. <code class="docutils literal notranslate"><span class="pre">.prune()</span></code> method is designed for “
post-optimizing” the on-disk data structure of <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> object. It can reduce the on-disk usage.</p>
</div>
</div>
<div class="section" id="side-by-side-vs-documentarray">
<h2>Side-by-side vs. <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code><a class="headerlink" href="#side-by-side-vs-documentarray" title="Permalink to this headline">¶</a></h2>
<p>Accessing elements in <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> is <em>almost</em> the same as <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code>, you can use integer/string index to
access element; you can loop over a <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> to get all <code class="docutils literal notranslate"><span class="pre">Document</span></code>; you can use <code class="docutils literal notranslate"><span class="pre">get_attributes</span></code>
or <code class="docutils literal notranslate"><span class="pre">traverse_flat</span></code> to achieve advanced traversal or getter.</p>
<p>This table summarizes the interfaces of <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> and <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code>:</p>
<div class="table-wrapper"><table border="1" class="docutils">
<thead>
<tr>
<th></th>
<th><code>DocumentArrayMemmap</code></th>
<th><code>DocumentArray</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__getitem__</code>, <code>__setitem__</code>, <code>__delitem__</code> (int)</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__getitem__</code>, <code>__setitem__</code>, <code>__delitem__</code> (string)</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__getitem__</code>, <code>__delitem__</code> (slice)</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__iter__</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__contains__</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__len__</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>append</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>extend</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>traverse_flat</code>, <code>traverse</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>get_attributes</code>, <code>get_attributes_with_docs</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>insert</code></td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><code>reverse</code> (inplace)</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><code>sort</code> (inplace)</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><code>__add__</code>, <code>__iadd__</code></td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><code>__bool__</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>__eq__</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>sample</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>shuffle</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>split</code></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>match</code> (L/Rvalue)</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>visualize</code></td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="convert-between-documentarray-and-documentarraymemmap">
<h2>Convert between <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code> and <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code><a class="headerlink" href="#convert-between-documentarray-and-documentarraymemmap" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">DocumentArray</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>

<span class="n">da</span> <span class="o">=</span> <span class="n">DocumentArray</span><span class="p">([</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">),</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'world'</span><span class="p">)])</span>

<span class="c1"># convert DocumentArray to DocumentArrayMemmap</span>
<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>

<span class="c1"># convert DocumentArrayMemmap to DocumentArray</span>
<span class="n">da</span> <span class="o">=</span> <span class="n">DocumentArray</span><span class="p">(</span><span class="n">dam</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="maintaining-consistency-via-reload-and-save">
<h2>Maintaining consistency via <code class="docutils literal notranslate"><span class="pre">.reload()</span></code> and <code class="docutils literal notranslate"><span class="pre">.save()</span></code><a class="headerlink" href="#maintaining-consistency-via-reload-and-save" title="Permalink to this headline">¶</a></h2>
<p>Considering two <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> objects that share the same on-disk storage <code class="docutils literal notranslate"><span class="pre">./memmap</span></code> but sit in different
processes/threads. After some writing ops, the consistency of the lookup table and the buffer pool may be corrupted, as
each <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code> object has its own version of lookup table and buffer pool in memory. <code class="docutils literal notranslate"><span class="pre">.reload()</span></code> and
<code class="docutils literal notranslate"><span class="pre">.save()</span></code> are for solving this issue:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'world'</span><span class="p">)</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
<span class="n">dam2</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>

<span class="n">dam</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">dam2</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

<span class="n">dam</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

<span class="n">dam2</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>You don’t need to use <code class="docutils literal notranslate"><span class="pre">.save</span></code> if you add new documents. However, if you modified an attribute of a document, you need
to use it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">)</span>

<span class="n">dam</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>
<span class="n">dam2</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="s1">'./my-memmap'</span><span class="p">)</span>

<span class="n">dam</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
<span class="n">d1</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'goodbye'</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">dam2</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dam2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">dam2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">'hello'</span>

<span class="n">dam</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">dam2</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">dam2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">'goodbye'</span>
</pre></div>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../executor/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Executor</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="documentarray-api.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">DocumentArray API</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; Jina AI Limited. All rights reserved.
            |
            Last updated on Aug 27, 2021.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">DocumentArrayMemmap API</a><ul>
<li><a class="reference internal" href="#create-documentarraymemmap">Create <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code></a></li>
<li><a class="reference internal" href="#add-documents-to-documentarraymemmap">Add Documents to <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code></a></li>
<li><a class="reference internal" href="#buffer-pool">Buffer pool</a></li>
<li><a class="reference internal" href="#modifying-elements-of-documentarraymemmap">Modifying elements of <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code></a></li>
<li><a class="reference internal" href="#clear-a-documentarraymemmap">Clear a <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code></a><ul>
<li><a class="reference internal" href="#pruning">Pruning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#side-by-side-vs-documentarray">Side-by-side vs. <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code></a></li>
<li><a class="reference internal" href="#convert-between-documentarray-and-documentarraymemmap">Convert between <code class="docutils literal notranslate"><span class="pre">DocumentArray</span></code> and <code class="docutils literal notranslate"><span class="pre">DocumentArrayMemmap</span></code></a></li>
<li><a class="reference internal" href="#maintaining-consistency-via-reload-and-save">Maintaining consistency via <code class="docutils literal notranslate"><span class="pre">.reload()</span></code> and <code class="docutils literal notranslate"><span class="pre">.save()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div>
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>